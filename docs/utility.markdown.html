---

title: utility.markdown


keywords: fastai
sidebar: home_sidebar

summary: "Markdown processing and displaying"
description: "Markdown processing and displaying"
nb_path: "nbs/utility.markdown.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/utility.markdown.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Embed-markdown-file">Embed markdown file<a class="anchor-link" href="#Embed-markdown-file"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Links">Links<a class="anchor-link" href="#Links"> </a></h3><p>I often embed markdown files here via <code>display(Markdown(text))</code> (see <code>embed_markdown_file</code>). This is useful when I want to state the same thing multiple times (e.g. definitions) because I can write the statement in one location and it will automatically be updated whenever I make changes to the statement (e.g. fixing errata).</p>
<p>One obstruction to this is that links in the markdown files cannot be expected to link to where I want them to - if I were to make links to (local) notebook files during editing, then the links will not link to webpages when I upload the website.</p>
<p>The <a href="#embed_markdown_file"><code>embed_markdown_file</code></a> method circumvents this obstruction - it allows me to choose whether the links will lead to (local) notebooks or the website. I will format links in the markdown files without specifying the precise locations, e.g. <code>[limit](limit_of_a_function_at_a_point)</code> will show the text <code>limit</code> and link to either a (local) notebook <code>limit_of_a_function_at_a_point.ipynb</code> or a webpage <code>limit_of_a_function_at_a_point.html</code> in the website.</p>
<blockquote><p><strong>Note</strong> The notebook files and the corresponding html files that are generated during <code>nbdev_build_docs</code> need to have the same name, e.g. <code>function.ipynb</code> needs to generate <code>function.html</code>.</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="find_links_in_markdown_text" class="doc_header"><code>find_links_in_markdown_text</code><a href="https://github.com/Hyun Jong Kim/mathbook/tree/master/mathbook/utility/markdown.py#L16" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>find_links_in_markdown_text</code>(<strong><code>text</code></strong>)</p>
</blockquote>
<p>Returns ranges in the markdown text string where links occur.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Parameters</strong></p>
<ul>
<li><code>text</code> - str</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>list of tuples. Each tuple is of the form <code>(a,b)</code> where <code>text[a:b]</code> is a markdown link.</li>
</ul>
<p><strong>Examples</strong></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sample_text</span> <span class="o">=</span> <span class="s1">&#39;123hi [thing](link) blah&#39;</span>
<span class="n">sample_range</span> <span class="o">=</span> <span class="n">find_links_in_markdown_text</span><span class="p">(</span><span class="n">sample_text</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">sample_range</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
<span class="k">assert</span> <span class="n">sample_text</span><span class="p">[</span><span class="n">sample_range</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span><span class="n">sample_range</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]]</span> <span class="o">==</span> <span class="s1">&#39;[thing](link)&#39;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="link_with_anchor" class="doc_header"><code>link_with_anchor</code><a href="https://github.com/Hyun Jong Kim/mathbook/tree/master/mathbook/utility/markdown.py#L24" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>link_with_anchor</code>(<strong><code>link_name</code></strong>, <strong><code>location</code></strong>=<em><code>'website'</code></em>)</p>
</blockquote>
<p>Formats link so that the file extension comes before
the pound sign of the anchor.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Parameters</strong></p>
<ul>
<li>link_name - str<ul>
<li>Should not be empty. Should be of the form <code>'link'</code> or <code>'link#anchor'</code>, i.e. should not have surrounding parentheses. Does not have a file extension, e.g. <code>'.html'</code> or <code>'.ipynb'</code>.</li>
</ul>
</li>
<li>location - <code>'website'</code> or <code>'notebook'</code>.</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>The same as <code>link_name</code>, except with the appropriate file extension added in before the anchor, if any and with the parentheses removed.</li>
</ul>
<p><strong>Examples</strong></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sample_link_name</span> <span class="o">=</span> <span class="s1">&#39;re#re.split&#39;</span>
<span class="n">sample_output</span> <span class="o">=</span> <span class="n">link_with_anchor</span><span class="p">(</span><span class="n">sample_link_name</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span><span class="s1">&#39;website&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">sample_output</span> <span class="o">==</span> <span class="s1">&#39;re.html#re.split&#39;</span>
<span class="n">sample_output</span> <span class="o">=</span> <span class="n">link_with_anchor</span><span class="p">(</span><span class="n">sample_link_name</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span><span class="s1">&#39;notebook&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">sample_output</span> <span class="o">==</span> <span class="s1">&#39;re.ipynb#re.split&#39;</span>

<span class="n">sample_link_name</span> <span class="o">=</span> <span class="s1">&#39;hi#&#39;</span>
<span class="n">sample_output</span> <span class="o">=</span> <span class="n">link_with_anchor</span><span class="p">(</span><span class="n">sample_link_name</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span><span class="s1">&#39;website&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">sample_output</span> <span class="o">==</span> <span class="s1">&#39;hi.html#&#39;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_formatted_markdown_link" class="doc_header"><code>get_formatted_markdown_link</code><a href="https://github.com/Hyun Jong Kim/mathbook/tree/master/mathbook/utility/markdown.py#L37" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_formatted_markdown_link</code>(<strong><code>unformatted_link</code></strong>, <strong><code>location</code></strong>=<em><code>'website'</code></em>)</p>
</blockquote>
<p>Formats markdown styled link string.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Parameters</strong></p>
<ul>
<li><code>unformatted_link</code> - str<ul>
<li>Of the form <code>[text](link)</code>.</li>
</ul>
</li>
<li><code>location</code> - <code>'website'</code> or <code>'notebook'</code>.</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>str, of the form <code>[text](link.html)</code> or <code>[text](link.ipynb)</code> depending
on <code>location</code>.</li>
</ul>
<p><strong>Examples</strong></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sample_link</span> <span class="o">=</span> <span class="s1">&#39;[function](function)&#39;</span>
<span class="n">sample_formatted_link</span> <span class="o">=</span> <span class="n">get_formatted_markdown_link</span><span class="p">(</span><span class="n">sample_link</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;website&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">sample_formatted_link</span> <span class="o">==</span> <span class="s1">&#39;[function](https://hyunjongkimmath.github.io/mathbook/function.html)&#39;</span>
<span class="n">sample_formatted_link</span> <span class="o">=</span> <span class="n">get_formatted_markdown_link</span><span class="p">(</span><span class="n">sample_link</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;notebook&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">sample_formatted_link</span> <span class="o">==</span> <span class="s1">&#39;[function](function.ipynb)&#39;</span>

<span class="n">sample_link</span> <span class="o">=</span> <span class="s1">&#39;[limit](limit#limit_of_a_function_at_a_point)&#39;</span>
<span class="n">sample_formatted_link</span> <span class="o">=</span> <span class="n">get_formatted_markdown_link</span><span class="p">(</span><span class="n">sample_link</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;website&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">sample_formatted_link</span> <span class="o">==</span> <span class="s1">&#39;[limit](https://hyunjongkimmath.github.io/mathbook/limit.html#limit_of_a_function_at_a_point)&#39;</span>
<span class="n">sample_formatted_link</span> <span class="o">=</span> <span class="n">get_formatted_markdown_link</span><span class="p">(</span><span class="n">sample_link</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;notebook&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">sample_formatted_link</span> <span class="o">==</span> <span class="s1">&#39;[limit](limit.ipynb#limit_of_a_function_at_a_point)&#39;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="replace_all_links_with_formatted_links" class="doc_header"><code>replace_all_links_with_formatted_links</code><a href="https://github.com/Hyun Jong Kim/mathbook/tree/master/mathbook/utility/markdown.py#L56" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>replace_all_links_with_formatted_links</code>(<strong><code>text</code></strong>, <strong><code>location</code></strong>=<em><code>'website'</code></em>)</p>
</blockquote>
<p>Returns a modification of <code>text</code> with all links formatted.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Parameters</strong></p>
<ul>
<li><code>text</code> - str</li>
<li><code>location</code> - <code>'website'</code> or <code>'notebook'</code>.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Footnotes">Footnotes<a class="anchor-link" href="#Footnotes"> </a></h3><p>I usually use footnotes in markdowns to make citations or to indicate notations. An example of the latter kind of footnotes is "$\operatorname{Pic}(X)$ denotes the Picard group of the variety $X$", where the term "Picard group" is linked to a page containing a definition of the term.</p>
<p>Although this can be time consuming for the writer to put together, the reader does not have to spend a great effort to figure out where the notation is introduced. This is particularly nice especially there is much notation exclusive to the writer's field or niche.</p>
<p>The writer also can quickly remind themselves of the notation whenever necessary. This is particularly useful when the writer is learning something new for the first time.</p>
<p>In markdown for jupyter notebook, however, the footnotes seem to be links by default. This thus has the same problem as that in <a href="#Links">the section above</a>. In other words, I also have to make sure that footnotes link to the correct location.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="find_footnotes_in_markdown_text" class="doc_header"><code>find_footnotes_in_markdown_text</code><a href="https://github.com/Hyun Jong Kim/mathbook/tree/master/mathbook/utility/markdown.py#L66" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>find_footnotes_in_markdown_text</code>(<strong><code>text</code></strong>)</p>
</blockquote>
<p>Returns ranges in the markdown text string where footnotes occur.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Parameters</strong></p>
<ul>
<li><code>text</code> - str</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>list of tuples. Each tuple is of the form <code>(a,b)</code> where <code>text[a:b]</code> is a markdown footnote.</li>
</ul>
<p><strong>Examples</strong></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sample_text</span> <span class="o">=</span> <span class="s1">&#39;some stuff[^1][^2]</span><span class="se">\n</span><span class="s1">[^1]:link#do</span><span class="se">\n</span><span class="s1">[^2]:other_link&#39;</span>
<span class="n">sample_ranges</span> <span class="o">=</span> <span class="n">find_footnotes_in_markdown_text</span><span class="p">(</span><span class="n">sample_text</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">sample_ranges</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
<span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">sample_ranges</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">c</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="n">sample_ranges</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="k">assert</span> <span class="n">sample_text</span><span class="p">[</span><span class="n">a</span><span class="p">:</span><span class="n">b</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;[^1]:link#do&quot;</span>
<span class="k">assert</span> <span class="n">sample_text</span><span class="p">[</span><span class="n">c</span><span class="p">:</span><span class="n">d</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;[^2]:other_link&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="replace_all_footnotes_with_formatted_footnotes" class="doc_header"><code>replace_all_footnotes_with_formatted_footnotes</code><a href="https://github.com/Hyun Jong Kim/mathbook/tree/master/mathbook/utility/markdown.py#L73" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>replace_all_footnotes_with_formatted_footnotes</code>(<strong><code>text</code></strong>, <strong><code>location</code></strong>=<em><code>'website'</code></em>)</p>
</blockquote>
<p>Returns a modification of <code>text</code> with all footnote links formatted.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Parameters</strong></p>
<ul>
<li><code>text</code> - str</li>
<li><code>location</code> - <code>'website'</code> or <code>'notebook'</code>.</li>
</ul>
<p><strong>Examples</strong></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sample_text</span> <span class="o">=</span> <span class="s1">&#39;some stuff[^1][^2]</span><span class="se">\n</span><span class="s1">[^1]:link#do</span><span class="se">\n</span><span class="s1">[^2]:other_link&#39;</span>
<span class="n">replace_all_footnotes_with_formatted_footnotes</span><span class="p">(</span><span class="n">sample_text</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;website&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;some stuff[^1][^2]\n[^1]:link.html#do\n[^2]:other_link.html&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Final-method">Final method<a class="anchor-link" href="#Final-method"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="embed_markdown_file" class="doc_header"><code>embed_markdown_file</code><a href="https://github.com/Hyun Jong Kim/mathbook/tree/master/mathbook/utility/markdown.py#L82" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>embed_markdown_file</code>(<strong><code>file_path</code></strong>, <strong><code>display_file_link</code></strong>=<em><code>False</code></em>, <strong><code>location</code></strong>=<em><code>'website'</code></em>)</p>
</blockquote>
<p>Embed markdown file content into ipynb.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Parameters</strong></p>
<ul>
<li><code>file_path</code> - Path-like</li>
<li><code>display_file_link</code> - bool<ul>
<li>If True, then displays a link to an edit mode ipynb for 
the markdown file at <code>file_path</code>. This should only be 
set to True inside an ipynb environment such as jupyter.</li>
</ul>
</li>
</ul>
<p><strong>Examples</strong></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">embed_markdown_file</span><span class="p">(</span><span class="s1">&#39;definition.limit_of_a_function_at_a_finite_input.md&#39;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;website&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<p>Let $f: D \to \mathbb{R}$ be a <a href="definition.real_valued_function.ipynb#Real-valued-function">real valued function</a>, and assume that $f$ is defined near $a$.</p>
<p>We write $$\lim\limits_{x \to a} f(x) = c$$ if for every $\epsilon &gt; 0$ there is a $\delta &gt; 0$ such that whenever $|x-a| &lt; \delta$ for $x \in D$<sup class="footnote-ref" id="fnref-1"><a href="#fn-1">1</a></sup></p>
<div class="footnotes">
<hr>
<ol><li id="fn-1"><p>notation.basic.ipynb#$\in$<a href="#fnref-1" class="footnote">&#8617;</a></p></li>
</ol>
</div>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

